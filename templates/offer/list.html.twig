{% extends 'base.html.twig' %}

{% block title %}Offers List{% endblock %}

{% block body %}
    {% for label, messages in app.flashes %}
        <div class="flash-{{ label }}">
            {% for message in messages %}
                <p>{{ message }}</p>
            {% endfor %}
        </div>
    {% endfor %}

    <h1>Car Offers</h1>
    <table>
        <tr>
            <th>Car</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Price</th>
            <th>Actions</th>
            <th>Image</th>
        </tr>
        {% for offer in offers %}
            <tr>
                <td>{{ offer.car.brand }} {{ offer.car.model }}</td>
                <td>{{ offer.startDate|date('Y-m-d') }}</td>
                <td>{{ offer.endDate ? offer.endDate|date('Y-m-d') : 'N/A' }}</td>
                <td>{{ offer.price }} â‚¬</td>
                <td>
                    <a href="{{ path('offer_view', {id: offer.id}) }}">View</a>
                    <a href="{{ path('offer_edit', {id: offer.id}) }}">Edit</a>
                </td>
                <td>
                    {% if offer.car.imageFilename %}
                        <img src="{{ asset('uploads/cars/' ~ offer.car.imageFilename) }}" alt="Car image" width="100">
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}
